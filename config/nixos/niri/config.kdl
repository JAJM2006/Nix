// ==============================================================================
// JAJM's NIRI CONFIGURATION - Tokyo Night Theme
// ==============================================================================
// Niri is a scrollable-tiling Wayland compositor
// Documentation: https://github.com/YaLTeR/niri
// ==============================================================================
// ==============================================================================
// INPUT CONFIGURATION
// ==============================================================================
input {
    keyboard {
        xkb {
            layout "gb"
        }
    }
    
    touchpad {
        tap
        natural-scroll
        dwt
        dwtp
    }
    
    focus-follows-mouse max-scroll-amount="90%"
    warp-mouse-to-focus
    workspace-auto-back-and-forth
}
// ==============================================================================
// OUTPUT CONFIGURATION
// ==============================================================================
output "eDP-1" {
    scale 1.0
    position x=0 y=0
}
// ==============================================================================
// Enable XWayland for X11 app compatibility
// ==============================================================================
prefer-no-csd
// ==============================================================================
// CURSOR CONFIGURATION
// ==============================================================================
cursor {
    xcursor-size 24
    xcursor-theme "Bibata-Modern-Ice"
}
// ==============================================================================
// LAYOUT & APPEARANCE
// ==============================================================================
layout {
    gaps 16
    
    
    struts{
        left 10
        right 10
        top 5
        bottom 10
    }
    border {
        width 2
        active-color "#7aa2f7"      // Tokyo Night blue
        inactive-color "#3b4261"    // Tokyo Night dark blue
    }
    
    preset-column-widths {
        proportion 0.25
        proportion 0.5
        proportion 0.75
        proportion 1.0
    }
    
    default-column-width {
        proportion 0.5
    }
    
    center-focused-column "never"
}
// ==============================================================================
// WINDOW RULE CONFIGURATION
// ==============================================================================
window-rule {
    geometry-corner-radius 12
    clip-to-geometry true
    match is-active=false
    opacity 0.85
    draw-border-with-background false
}
// ==============================================================================
// ANIMATIONS
// ==============================================================================
animations {
    horizontal-view-movement {
        spring stiffness=1000 damping-ratio=1.0 epsilon=0.0001
    }
    workspace-switch {
        spring stiffness=1000 damping-ratio=1.0 epsilon=0.0001
    }
    window-open {
        duration-ms 250
        curve "ease-out-expo"
    }
    window-close {
        duration-ms 200
        curve "ease-out-quad"  // Changed from ease-in-out-cubic
    }
}
// ==============================================================================
// SCREENSHOTS
// ==============================================================================
screenshot-path "~/Pictures/Screenshots/Screenshot-%Y-%m-%d-%H-%M-%S.png"
// ==============================================================================
// KEYBINDINGS
// ==============================================================================
binds {
    // --------------------------------------------------------------------------
    // Applications
    // --------------------------------------------------------------------------
    Mod+Return { spawn "alacritty"; }                      // Terminal
    Mod+D { spawn "noctalia-shell" "ipc" "call" "launcher" "toggle"; }                 // App launcher
    Mod+E { spawn "thunar"; }                              // File manager
    
    // --------------------------------------------------------------------------
    // Window Management
    // --------------------------------------------------------------------------
    Mod+Q { close-window; }                                // Close window
    Mod+F { maximize-column; }                             // Maximize column
    Mod+Shift+F { fullscreen-window; }                     // Fullscreen
    Mod+Space { toggle-window-floating; }                  // Toggle floating
    Mod+W { toggle-column-tabbed-display; }                // Toggle tabbed
    Mod+C { center-column; }                               // Center column
    Mod+Tab { focus-column-first; }                        // Focus first column
    
    // --------------------------------------------------------------------------
    // Column Management
    // --------------------------------------------------------------------------
    Mod+Comma { consume-window-into-column; }              // Consume window
    Mod+Period { expel-window-from-column; }               // Expel window
    
    // --------------------------------------------------------------------------
    // Column Width Presets
    // --------------------------------------------------------------------------
    Mod+1 { set-column-width "25%"; }                      // 25% width
    Mod+2 { set-column-width "50%"; }                      // 50% width
    Mod+3 { set-column-width "75%"; }                      // 75% width
    Mod+4 { set-column-width "100%"; }                     // 100% width
    
    // --------------------------------------------------------------------------
    // Column & Window Sizing
    // --------------------------------------------------------------------------
    Mod+Minus { set-column-width "-10%"; }                 // Decrease width
    Mod+Equal { set-column-width "+10%"; }                  // Increase width
    Mod+Shift+Minus { set-window-height "-10%"; }          // Decrease height
    Mod+Shift+Equal { set-window-height "+10%"; }           // Increase height
    
    // --------------------------------------------------------------------------
    // Focus Navigation (Vim-style)
    // --------------------------------------------------------------------------
    Mod+H { focus-column-left; }                           // Focus left
    Mod+L { focus-column-right; }                          // Focus right
    Mod+J { focus-window-down; }                           // Focus down
    Mod+K { focus-window-up; }                             // Focus up
    
    // --------------------------------------------------------------------------
    // Focus Navigation (Arrow keys)
    // --------------------------------------------------------------------------
    Mod+Left { focus-column-left; }                        // Focus left
    Mod+Right { focus-column-right; }                      // Focus right
    Mod+Down { focus-window-down; }                        // Focus down
    Mod+Up { focus-window-up; }                            // Focus up
    
    // --------------------------------------------------------------------------
    // Window Movement (Vim-style)
    // --------------------------------------------------------------------------
    Mod+Shift+H { move-column-left; }                      // Move left
    Mod+Shift+L { move-column-right; }                     // Move right
    Mod+Shift+J { move-window-down; }                      // Move down
    Mod+Shift+K { move-window-up; }                        // Move up
    
    // --------------------------------------------------------------------------
    // Workspace Management
    // --------------------------------------------------------------------------
    Mod+Ctrl+Down { focus-workspace-down; }                // Next workspace
    Mod+Ctrl+Up { focus-workspace-up; }                    // Previous workspace
    Mod+Shift+Down { move-column-to-workspace-down; }    // Move to next WS
    Mod+Shift+Up { move-column-to-workspace-up; }      // Move to prev WS
    
    // --------------------------------------------------------------------------
    // Screenshots
    // --------------------------------------------------------------------------
    Print { screenshot-screen; }                           // Full screen
    Mod+Shift+S { screenshot; }                            // Selection
    Mod+Shift+Alt+S { screenshot-window; }                 // Current window
    
    // --------------------------------------------------------------------------
    // Wallpaper Control
    // --------------------------------------------------------------------------
    Mod+Shift+W { spawn "sh" "-c" "swww img $(find ~/Pictures/Wallpapers -type f | shuf -n 1) --transition-type random"; }  // Random wallpaper
    
    // --------------------------------------------------------------------------
    // Media Keys (MPD Control)
    // --------------------------------------------------------------------------
    XF86AudioPlay { spawn "mpc" "toggle"; }                // MPD: Play/Pause
    XF86AudioNext { spawn "mpc" "next"; }                  // MPD: Next track
    XF86AudioPrev { spawn "mpc" "prev"; }                  // MPD: Previous track
    XF86AudioStop { spawn "mpc" "stop"; }                  // MPD: Stop
    
    // --------------------------------------------------------------------------
    // MPD Control (Alternative Bindings)
    // --------------------------------------------------------------------------
    Mod+P { spawn "mpc" "toggle"; }                        // MPD: Play/Pause
    Mod+BracketRight { spawn "mpc" "next"; }               // MPD: Next track
    Mod+BracketLeft { spawn "mpc" "prev"; }                // MPD: Previous track
    Mod+Shift+P { spawn "mpc" "stop"; }                    // MPD: Stop playback
    Mod+I { spawn "sh" "-c" "notify-send 'Now Playing' \"$(mpc current)\""; }  // Show current track
    
    // --------------------------------------------------------------------------
    // Volume Control
    // --------------------------------------------------------------------------
    XF86AudioRaiseVolume { spawn "wpctl" "set-volume" "@DEFAULT_AUDIO_SINK@" "5%+"; }
    XF86AudioLowerVolume { spawn "wpctl" "set-volume" "@DEFAULT_AUDIO_SINK@" "5%-"; }
    XF86AudioMute { spawn "wpctl" "set-mute" "@DEFAULT_AUDIO_SINK@" "toggle"; }
    
    // --------------------------------------------------------------------------
    // Brightness Control
    // --------------------------------------------------------------------------
    XF86MonBrightnessUp { spawn "brightnessctl" "set" "5%+"; }
    XF86MonBrightnessDown { spawn "brightnessctl" "set" "5%-"; }
    
    // --------------------------------------------------------------------------
    // System Control
    // --------------------------------------------------------------------------
    Mod+Shift+E { quit; }                                  // Quit niri
    Mod+Shift+R { spawn "niri-msg" "action" "reload-config"; }
  }
// ==============================================================================
// AUTOSTART APPLICATIONS
// ==============================================================================
spawn-at-startup "noctalia-shell"                          // Status bar
spawn-at-startup "dunst"                                   // Notifications
spawn-at-startup "wl-paste" "--watch" "cliphist" "store"   // Clipboard manager
spawn-at-startup "swww-daemon"                             // Wallpaper daemon
spawn-at-startup "mpc" "play"                              // Resume playback on login
spawn-at-startup "sh" "-c" "sleep 2 && swww img ~/Pictures/Wallpapers/default.jpg --transition-type wipe"  // Initial wallpaper
